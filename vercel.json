{
  "version": 2,
  "outputDirectory": "frontend/dist/newsflow",
  "rewrites": [
    {
      "source": "/api/(.*)",
      "destination": "/api/index"
    },
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ],
  "headers": [
    {
      "source": "/api/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "no-cache, no-store, must-revalidate"
        },
        {
          "key": "Pragma",
          "value": "no-cache"
        },
        {
          "key": "Expires",
          "value": "0"
        }
      ]
    },
    {
      "source": "/(.*\\.json)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "no-cache, no-store, must-revalidate"
        },
        {
          "key": "Pragma",
          "value": "no-cache"
        }
      ]
    },
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=0, must-revalidate"
        }
      ]
    }
  ],
  "functions": {
    "api/index.py": {
      "runtime": "python3.12",
      "includeFiles": [
        "api/final_news_italian.json",
        "api/all_sources_news.json",
        "api/digest.json",
        "backend/**",
        "requirements.txt"
      ]
    },
    "api/[...path].py": {
      "runtime": "python3.12",
      "includeFiles": [
        "api/final_news_italian.json",
        "api/all_sources_news.json",
        "api/digest.json",
        "backend/**",
        "requirements.txt"
      ]
    }
  }
}
