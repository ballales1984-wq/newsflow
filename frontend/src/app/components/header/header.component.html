<mat-toolbar color="primary" class="header">
  <div class="header-content">
    <div class="logo-section">
      <a routerLink="/" class="logo-badge">NF</a>
      <div class="datetime-display">
        <span class="date">{{ currentDate }}</span>
        <span class="time">{{ currentTime }}</span>
      </div>
      <div class="weather-display" *ngIf="weatherData">
        <mat-icon class="weather-icon">{{ weatherData.icon }}</mat-icon>
        <div class="weather-info">
          <span class="temperature">{{ weatherData.temperature }}Â°</span>
          <span class="condition">{{ weatherData.condition }}</span>
          <span class="location">{{ weatherData.city }}</span>
        </div>
      </div>
    </div>

    <div class="title-section">
      <a routerLink="/" class="main-title">
        <span class="title-news">News</span>
        <span class="title-flow">Flow</span>
      </a>
    </div>

    <div class="actions-section">
      <button 
        mat-icon-button 
        matTooltip="Articoli salvati"
        routerLink="/saved"
        [attr.aria-label]="'Articoli salvati' + (savedCount > 0 ? ': ' + savedCount : '')"
      >
        <mat-icon 
          [matBadge]="savedCount > 0 ? savedCount : null" 
          matBadgeColor="warn"
        >
          bookmark
        </mat-icon>
      </button>

      <button mat-icon-button [matMenuTriggerFor]="userMenu" *ngIf="currentUser" [attr.aria-label]="'Menu utente: ' + currentUser.name">
        <div class="user-avatar">{{ currentUser.name.substring(0, 2).toUpperCase() }}</div>
      </button>
      
      <mat-menu #userMenu="matMenu">
        <div class="user-menu-header" *ngIf="currentUser">
          <div class="user-avatar-large">{{ currentUser.name.substring(0, 2).toUpperCase() }}</div>
          <div class="user-info">
            <div class="user-name">{{ currentUser.name }}</div>
            <div class="user-status">Lettore attivo</div>
          </div>
        </div>
        <mat-divider></mat-divider>
        <button mat-menu-item routerLink="/saved">
          <mat-icon>bookmark</mat-icon>
          <span>Articoli salvati ({{ savedCount }})</span>
        </button>
        <button mat-menu-item>
          <mat-icon>settings</mat-icon>
          <span>Impostazioni</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item disabled>
          <mat-icon>info</mat-icon>
          <span class="small-text">Auto-login attivo</span>
        </button>
      </mat-menu>
    </div>
  </div>
</mat-toolbar>

